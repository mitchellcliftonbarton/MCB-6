import{a as K,w as Q,d as me,e as q,s as X}from"./globalStore.B6N8OPHQ.js";import{s as G,e as v,t as S,b as $,l as D,q as E,d as _,f as L,i as I,o as d,u as ce,U as de,v as j,n as B,x as ue,V as he,a as N,c as A,T as pe,W as Y,g as ge,z as _e,r as ke,A as Z}from"./scheduler.DaRbBg4G.js";import{S as H,i as z,t as m,g as O,b,e as U,c as T,a as V,m as M,d as R}from"./index.Bh_7T8ID.js";import{g as be}from"./entry.BkTQpsGg.js";import{W as Pe}from"./WipGridItem.BMmQTYcV.js";import{S as we}from"./SearchIcon.DiK98R3h.js";async function Re(r,e,l=null){r=r?parseInt(r):1,e=parseInt(e);const t=(r-1)*e,s=t+e+1;let o=!1;if(l!==null&&l!==""?o=await K.fetch(`{
        "currentPageData": *[_type == "wip" && ([title, medium] match "${l.toLowerCase()}*" || notes[].children[].text match "${l.toLowerCase()}*" && media != null)] | order(date desc, _createdAt desc) [$offset...$itemsPerPagePlusOne] {
          ${Q}
        },
				"totalCount": count(*[_type == "wip" && ([title, medium] match "${l.toLowerCase()}*" || notes[].children[].text match "${l.toLowerCase()}*" && media != null)])
      }`,{itemsPerPagePlusOne:s,offset:t}):o=await K.fetch(`{
        "currentPageData": *[_type == "wip" && media != null] | order(date desc, _createdAt desc) [$offset...$itemsPerPagePlusOne] {
          ${Q}
        },
				"totalCount": count(*[_type == "wip" && media != null])
      }`,{itemsPerPagePlusOne:s,offset:t}),o.error)return!1;const{currentPageData:a,totalCount:f}=o,n=a.length<=e,i=r===1,c=a.slice(0,e),u=i?!1:{pageNum:r-1},y=n?!1:{pageNum:r+1},p={from:t+1,to:t+c.length};return{wip:c,totalCount:f,range:p,paginationData:{isLastPage:n,isFirstPage:i,prevPageLink:u,nextPageLink:y,pageNum:r,totalPages:Math.ceil(f/e)}}}function ve(r){let e,l,t,s;return{c(){e=v("a"),l=S(r[1]),this.h()},l(o){e=$(o,"A",{href:!0});var a=D(e);l=E(a,r[1]),a.forEach(_),this.h()},h(){L(e,"href",r[0])},m(o,a){I(o,e,a),d(e,l),t||(s=ce(e,"click",de(r[2])),t=!0)},p(o,[a]){a&2&&j(l,o[1]),a&1&&L(e,"href",o[0])},i:B,o:B,d(o){o&&_(e),t=!1,s()}}}function $e(r,e,l){let t;ue(r,me,n=>l(3,t=n));let{href:s,label:o}=e;const a=he();async function f(){a("set-loading",!0),window.scrollTo({top:0,behavior:"instant"});const n=window.location.origin,i=s.startsWith("http")?s:`${n}${s}`,c=new URL(i),u=c.searchParams.get("page_num"),y=c.searchParams.get("items_per_page")||t,p=c.searchParams.get("term"),k=await(await fetch("/api/wip",{body:JSON.stringify({pageNum:u,itemsPerPage:y,term:p}),headers:{"Content-Type":"application/json"},method:"POST"})).json();k.status!=="success"&&(window.location.href=s),a("pagination-link-clicked",{data:k.data,href:s})}return r.$$set=n=>{"href"in n&&l(0,s=n.href),"label"in n&&l(1,o=n.label)},[s,o,f]}class J extends H{constructor(e){super(),z(this,e,$e,ve,G,{href:0,label:1})}}function x(r,e,l){const t=r.slice();return t[15]=e[l],t}function ee(r){let e,l;return e=new J({props:{href:r[6](r[5].pageNum),label:"Prev"}}),e.$on("pagination-link-clicked",r[7]),e.$on("set-loading",r[8]),{c(){T(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),l=!0},p(t,s){const o={};s&32&&(o.href=t[6](t[5].pageNum)),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function te(r){let e,l,t=q(r[0]),s=[];for(let a=0;a<t.length;a+=1)s[a]=le(x(r,t,a));const o=a=>b(s[a],1,1,()=>{s[a]=null});return{c(){e=v("ul");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=$(a,"UL",{class:!0});var f=D(e);for(let n=0;n<s.length;n+=1)s[n].l(f);f.forEach(_),this.h()},h(){L(e,"class","flex gap-4")},m(a,f){I(a,e,f);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,null);l=!0},p(a,f){if(f&387){t=q(a[0]);let n;for(n=0;n<t.length;n+=1){const i=x(a,t,n);s[n]?(s[n].p(i,f),m(s[n],1)):(s[n]=le(i),s[n].c(),m(s[n],1),s[n].m(e,null))}for(O(),n=t.length;n<s.length;n+=1)o(n);U()}},i(a){if(!l){for(let f=0;f<t.length;f+=1)m(s[f]);l=!0}},o(a){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)b(s[f]);l=!1},d(a){a&&_(e),pe(s,a)}}}function Le(r){let e,l=r[15].label+"",t;return{c(){e=v("span"),t=S(l)},l(s){e=$(s,"SPAN",{});var o=D(e);t=E(o,l),o.forEach(_)},m(s,o){I(s,e,o),d(e,t)},p(s,o){o&1&&l!==(l=s[15].label+"")&&j(t,l)},i:B,o:B,d(s){s&&_(e)}}}function ye(r){let e,l;return e=new J({props:{href:r[15].link,label:r[15].label}}),e.$on("pagination-link-clicked",r[7]),e.$on("set-loading",r[8]),{c(){T(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),l=!0},p(t,s){const o={};s&1&&(o.href=t[15].link),s&1&&(o.label=t[15].label),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function le(r){let e,l,t,s,o;const a=[ye,Le],f=[];function n(i,c){return i[15].link?0:1}return l=n(r),t=f[l]=a[l](r),{c(){e=v("li"),t.c(),s=N(),this.h()},l(i){e=$(i,"LI",{});var c=D(e);t.l(c),s=A(c),c.forEach(_),this.h()},h(){Y(e,"active",r[15].label===r[1])},m(i,c){I(i,e,c),f[l].m(e,null),d(e,s),o=!0},p(i,c){let u=l;l=n(i),l===u?f[l].p(i,c):(O(),b(f[u],1,1,()=>{f[u]=null}),U(),t=f[l],t?t.p(i,c):(t=f[l]=a[l](i),t.c()),m(t,1),t.m(e,s)),(!o||c&3)&&Y(e,"active",i[15].label===i[1])},i(i){o||(m(t),o=!0)},o(i){b(t),o=!1},d(i){i&&_(e),f[l].d()}}}function ne(r){let e,l;return e=new J({props:{href:r[6](r[4].pageNum),label:"Next"}}),e.$on("pagination-link-clicked",r[7]),e.$on("set-loading",r[8]),{c(){T(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),l=!0},p(t,s){const o={};s&16&&(o.href=t[6](t[4].pageNum)),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function De(r){let e,l,t,s,o=!r[2]&&ee(r),a=r[0].length>0&&te(r),f=!r[3]&&ne(r);return{c(){e=v("div"),o&&o.c(),l=N(),a&&a.c(),t=N(),f&&f.c(),this.h()},l(n){e=$(n,"DIV",{class:!0});var i=D(e);o&&o.l(i),l=A(i),a&&a.l(i),t=A(i),f&&f.l(i),i.forEach(_),this.h()},h(){L(e,"class","pagination flex justify-center mt-20 enter-in-1 delay-100 svelte-a8ekpi")},m(n,i){I(n,e,i),o&&o.m(e,null),d(e,l),a&&a.m(e,null),d(e,t),f&&f.m(e,null),s=!0},p(n,[i]){n[2]?o&&(O(),b(o,1,1,()=>{o=null}),U()):o?(o.p(n,i),i&4&&m(o,1)):(o=ee(n),o.c(),m(o,1),o.m(e,l)),n[0].length>0?a?(a.p(n,i),i&1&&m(a,1)):(a=te(n),a.c(),m(a,1),a.m(e,t)):a&&(O(),b(a,1,1,()=>{a=null}),U()),n[3]?f&&(O(),b(f,1,1,()=>{f=null}),U()):f?(f.p(n,i),i&8&&m(f,1)):(f=ne(n),f.c(),m(f,1),f.m(e,null))},i(n){s||(m(o),m(a),m(f),s=!0)},o(n){b(o),b(a),b(f),s=!1},d(n){n&&_(e),o&&o.d(),a&&a.d(),f&&f.d()}}}const W=3;function Ce(r,e,l){let t,s,o,a,f,n,i,{paginationData:c,basePath:u="/wip"}=e;const y=he();function p(g){const w=new URL("https://test.com"+u);return g===1?`${u}`:(w.searchParams.set("page_num",g),w.pathname+"?"+w.searchParams.toString())}const h=Math.floor(W/2)+1,k=W-h;function P(g){y("pagination-link-clicked",g.detail)}function C(g){y("set-loading",g.detail)}return r.$$set=g=>{"paginationData"in g&&l(9,c=g.paginationData),"basePath"in g&&l(10,u=g.basePath)},r.$$.update=()=>{if(r.$$.dirty&512&&l(5,t=c.prevPageLink),r.$$.dirty&512&&l(4,s=c.nextPageLink),r.$$.dirty&512&&l(3,o=c.isLastPage),r.$$.dirty&512&&l(2,a=c.isFirstPage),r.$$.dirty&512&&l(1,f=c.pageNum),r.$$.dirty&512&&l(11,n=c.totalPages),r.$$.dirty&2051)if(l(0,i=[]),n<=W*2)for(let g=1;g<=n;g++)i.push({link:p(g),label:g});else if(f<=W){const g=f===W?W+k:W;for(let w=1;w<=g;w++)i.push({link:p(w),label:w});i.push({link:null,label:"..."}),i.push({link:p(n),label:n})}else if(f>=n-h){i.push({link:p(1),label:1}),i.push({link:null,label:"..."});const g=f===n-h?0:k;for(let w=n-W+g;w<=n;w++)i.push({link:p(w),label:w})}else{i.push({link:p(1),label:1}),i.push({link:null,label:"..."});for(let g=f-h+1;g<=f+h-1;g++)i.push({link:p(g),label:g});i.push({link:null,label:"..."}),i.push({link:p(n),label:n})}},l(0,i=[]),[i,f,a,o,s,t,p,P,C,c,u,n]}class Se extends H{constructor(e){super(),z(this,e,Ce,De,G,{paginationData:9,basePath:10})}}function Ee(r){let e,l,t,s,o='<span>Search</span> <span class="search-button-shortcut hidden lg:inline svelte-wf26b9">⌘K</span>',a,f,n;return l=new we({}),{c(){e=v("button"),T(l.$$.fragment),t=N(),s=v("span"),s.innerHTML=o,this.h()},l(i){e=$(i,"BUTTON",{class:!0});var c=D(e);V(l.$$.fragment,c),t=A(c),s=$(c,"SPAN",{class:!0,"data-svelte-h":!0}),ge(s)!=="svelte-1a59jtf"&&(s.innerHTML=o),c.forEach(_),this.h()},h(){L(s,"class","search-button-text ml-2 lg:ml-3 svelte-wf26b9"),L(e,"class","enter-in-1 search-button lg:hover:text-primary duration-300 transition-colors flex items-center svelte-wf26b9")},m(i,c){I(i,e,c),M(l,e,null),d(e,t),d(e,s),a=!0,f||(n=ce(e,"click",r[0]),f=!0)},p:B,i(i){a||(m(l.$$.fragment,i),a=!0)},o(i){b(l.$$.fragment,i),a=!1},d(i){i&&_(e),R(l),f=!1,n()}}}function Ie(r,e,l){let t;return ue(r,X,o=>l(1,t=o)),[()=>{_e(X,t=!t,t)}]}class Ne extends H{constructor(e){super(),z(this,e,Ie,Ee,G,{})}}function ae(r,e,l){const t=r.slice();return t[11]=e[l],t}function ie(r){let e,l,t,s,o,a,f;return{c(){e=v("p"),l=S(r[6]),t=S(" results for: "),s=v("span"),o=S("“"),a=S(r[5]),f=S("”"),this.h()},l(n){e=$(n,"P",{class:!0});var i=D(e);l=E(i,r[6]),t=E(i," results for: "),s=$(i,"SPAN",{class:!0});var c=D(s);o=E(c,"“"),a=E(c,r[5]),f=E(c,"”"),c.forEach(_),i.forEach(_),this.h()},h(){L(s,"class","bg-pink"),L(e,"class","mt-6")},m(n,i){I(n,e,i),d(e,l),d(e,t),d(e,s),d(s,o),d(s,a),d(s,f)},p(n,i){i&64&&j(l,n[6]),i&32&&j(a,n[5])},d(n){n&&_(e)}}}function se(r){let e,l=r[2].from+"",t,s,o=r[2].to+"",a,f,n,i;return{c(){e=v("p"),t=S(l),s=S(" - "),a=S(o),f=S(" of "),n=S(r[6]),i=S(" items"),this.h()},l(c){e=$(c,"P",{class:!0});var u=D(e);t=E(u,l),s=E(u," - "),a=E(u,o),f=E(u," of "),n=E(u,r[6]),i=E(u," items"),u.forEach(_),this.h()},h(){L(e,"class","enter-in-1")},m(c,u){I(c,e,u),d(e,t),d(e,s),d(e,a),d(e,f),d(e,n),d(e,i)},p(c,u){u&4&&l!==(l=c[2].from+"")&&j(t,l),u&4&&o!==(o=c[2].to+"")&&j(a,o),u&64&&j(n,c[6])},d(c){c&&_(e)}}}function re(r){let e,l,t,s,o=q(r[4]),a=[];for(let i=0;i<o.length;i+=1)a[i]=oe(ae(r,o,i));const f=i=>b(a[i],1,1,()=>{a[i]=null});let n=r[3].totalPages>1&&fe(r);return{c(){e=v("ul");for(let i=0;i<a.length;i+=1)a[i].c();l=N(),n&&n.c(),t=Z(),this.h()},l(i){e=$(i,"UL",{class:!0});var c=D(e);for(let u=0;u<a.length;u+=1)a[u].l(c);c.forEach(_),l=A(i),n&&n.l(i),t=Z(),this.h()},h(){L(e,"class","enter-in-1 delay-100 grid-view grid grid-cols-2 lg:grid-cols-6 mt-4 lg:mt-6 svelte-1a3dvfe")},m(i,c){I(i,e,c);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);I(i,l,c),n&&n.m(i,c),I(i,t,c),s=!0},p(i,c){if(c&16){o=q(i[4]);let u;for(u=0;u<o.length;u+=1){const y=ae(i,o,u);a[u]?(a[u].p(y,c),m(a[u],1)):(a[u]=oe(y),a[u].c(),m(a[u],1),a[u].m(e,null))}for(O(),u=o.length;u<a.length;u+=1)f(u);U()}i[3].totalPages>1?n?(n.p(i,c),c&8&&m(n,1)):(n=fe(i),n.c(),m(n,1),n.m(t.parentNode,t)):n&&(O(),b(n,1,1,()=>{n=null}),U())},i(i){if(!s){for(let c=0;c<o.length;c+=1)m(a[c]);m(n),s=!0}},o(i){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)b(a[c]);b(n),s=!1},d(i){i&&(_(e),_(l),_(t)),pe(a,i),n&&n.d(i)}}}function oe(r){let e,l,t,s,o;return l=new Pe({props:{item:r[11]}}),{c(){e=v("li"),T(l.$$.fragment),t=N(),this.h()},l(a){e=$(a,"LI",{key:!0,class:!0});var f=D(e);V(l.$$.fragment,f),t=A(f),f.forEach(_),this.h()},h(){L(e,"key",s=r[11]._id),L(e,"class","svelte-1a3dvfe")},m(a,f){I(a,e,f),M(l,e,null),d(e,t),o=!0},p(a,f){const n={};f&16&&(n.item=a[11]),l.$set(n),(!o||f&16&&s!==(s=a[11]._id))&&L(e,"key",s)},i(a){o||(m(l.$$.fragment,a),o=!0)},o(a){b(l.$$.fragment,a),o=!1},d(a){a&&_(e),R(l)}}}function fe(r){let e,l;return e=new Se({props:{paginationData:r[3],basePath:r[0]}}),e.$on("pagination-link-clicked",r[7]),e.$on("set-loading",r[8]),{c(){T(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),l=!0},p(t,s){const o={};s&8&&(o.paginationData=t[3]),s&1&&(o.basePath=t[0]),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ae(r){let e,l,t,s="WIP",o,a,f,n,i,c,u,y,p=r[5]&&ie(r);i=new Ne({});let h=r[1]===!1&&se(r),k=r[1]===!1&&re(r);return{c(){e=v("div"),l=v("div"),t=v("h1"),t.textContent=s,o=N(),p&&p.c(),a=N(),f=v("div"),n=v("div"),T(i.$$.fragment),c=N(),h&&h.c(),u=N(),k&&k.c(),this.h()},l(P){e=$(P,"DIV",{class:!0});var C=D(e);l=$(C,"DIV",{class:!0});var g=D(l);t=$(g,"H1",{"data-svelte-h":!0}),ge(t)!=="svelte-1eeoqyu"&&(t.textContent=s),o=A(g),p&&p.l(g),g.forEach(_),a=A(C),f=$(C,"DIV",{class:!0});var w=D(f);n=$(w,"DIV",{class:!0});var F=D(n);V(i.$$.fragment,F),c=A(F),h&&h.l(F),F.forEach(_),u=A(w),k&&k.l(w),w.forEach(_),C.forEach(_),this.h()},h(){L(l,"class","enter-in-1 text-center max-w-[250px] mx-auto"),L(n,"class","flex justify-between items-center"),L(f,"class",ke("content-container mt-8 lg:mt-48")+" svelte-1a3dvfe"),L(e,"class","mt-20 lg:mt-40 pb-40 lg:pb-60")},m(P,C){I(P,e,C),d(e,l),d(l,t),d(l,o),p&&p.m(l,null),d(e,a),d(e,f),d(f,n),M(i,n,null),d(n,c),h&&h.m(n,null),d(f,u),k&&k.m(f,null),y=!0},p(P,[C]){P[5]?p?p.p(P,C):(p=ie(P),p.c(),p.m(l,null)):p&&(p.d(1),p=null),P[1]===!1?h?h.p(P,C):(h=se(P),h.c(),h.m(n,null)):h&&(h.d(1),h=null),P[1]===!1?k?(k.p(P,C),C&2&&m(k,1)):(k=re(P),k.c(),m(k,1),k.m(f,null)):k&&(O(),b(k,1,1,()=>{k=null}),U())},i(P){y||(m(i.$$.fragment,P),m(k),y=!0)},o(P){b(i.$$.fragment,P),b(k),y=!1},d(P){P&&_(e),p&&p.d(),R(i),h&&h.d(),k&&k.d()}}}function We(r,e,l){let t,s,o,a,f,{data:n,term:i,basePath:c="/wip"}=e,u=!1;function y(h){be(h.detail.href),l(4,t=h.detail.data.wip),l(3,s=h.detail.data.paginationData),l(2,a=h.detail.data.range),l(1,u=!1)}function p(h){l(1,u=h.detail)}return r.$$set=h=>{"data"in h&&l(9,n=h.data),"term"in h&&l(10,i=h.term),"basePath"in h&&l(0,c=h.basePath)},r.$$.update=()=>{r.$$.dirty&512&&l(4,t=n.wip),r.$$.dirty&512&&l(3,s=n.paginationData),r.$$.dirty&512&&l(6,o=n.totalCount),r.$$.dirty&512&&l(2,a=n.range),r.$$.dirty&1024&&l(5,f=i)},[c,u,a,s,t,f,o,y,p,n,i]}class Be extends H{constructor(e){super(),z(this,e,We,Ae,G,{data:9,term:10,basePath:0})}}export{Be as W,Re as g};

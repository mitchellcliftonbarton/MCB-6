import { s as subscribe, n as null_to_empty } from "./utils.js";
import { c as create_ssr_component, e as escape, a as add_attribute } from "./ssr.js";
import { s as searchActive, d as defaultItemsPerPage } from "./globalStore.js";
const css = {
  code: ".dropdown-content.svelte-7z372w.svelte-7z372w{opacity:0;transform:translateY(calc(100% + 15px));border:1px solid black;pointer-events:none;background-color:var(--white);transition:opacity 0.2s,\n			transform 0.2s}.nav-options-dropdown.open.svelte-7z372w .dropdown-content.svelte-7z372w{opacity:1;transform:translateY(calc(100% + 10px));pointer-events:auto}.dropdown-content.svelte-7z372w a.svelte-7z372w,.dropdown-content.svelte-7z372w button.svelte-7z372w{display:flex;width:100%;padding:0.6rem 2.5rem;text-align:center;justify-content:center;transition:background-color 0.3s;white-space:nowrap;@media screen and (min-width: 1024px) {\n			padding: 1rem 3rem;\n		}}.dropdown-content.svelte-7z372w a.svelte-7z372w:hover,.dropdown-content.svelte-7z372w button.svelte-7z372w:hover{background-color:var(--grey-2)}.dropdown-content.svelte-7z372w button .search-button-shortcut.svelte-7z372w{color:var(--grey-3)}.dropdown-content.svelte-7z372w>.svelte-7z372w:not(:last-child){border-bottom:1px solid var(--grey-3)}",
  map: `{"version":3,"file":"NavOptionsDropdown.svelte","sources":["NavOptionsDropdown.svelte"],"sourcesContent":["<script>\\n\\timport { defaultItemsPerPage } from '$lib/stores/globalStore';\\n\\timport { searchActive } from '$lib/stores/globalStore';\\n\\timport { onMount } from 'svelte';\\n\\n\\texport let wipDetail;\\n\\n\\t$: contextWipArchivePage = wipDetail\\n\\t\\t? Math.floor(wipDetail.currentIndex / $defaultItemsPerPage) + 1\\n\\t\\t: 1;\\n\\n\\tlet isOpen = false;\\n\\tlet referrer = false;\\n\\tlet referrerIsArchive = false;\\n\\n\\tconst openSearch = () => {\\n\\t\\t$searchActive = true;\\n\\t\\tisOpen = false;\\n\\t};\\n\\n\\tconst handleBack = () => {\\n\\t\\twindow.history.back();\\n\\t};\\n\\n\\tonMount(() => {\\n\\t\\t// check if referrer has same domain as current page\\n\\t\\tif (document.referrer.includes(window.location.hostname)) {\\n\\t\\t\\treferrer = document.referrer;\\n\\n\\t\\t\\tconst referrerDomain = new URL(referrer);\\n\\n\\t\\t\\tif (!referrerDomain.pathname.includes('/wip/') && referrerDomain.pathname.length <= 5) {\\n\\t\\t\\t\\treferrerIsArchive = true;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t});\\n<\/script>\\n\\n<div\\n\\tclass={\`nav-options-dropdown enter-in-1 delay-100 col-span-6 lg:col-span-4 flex justify-end relative \${isOpen ? 'open' : ''}\`}\\n>\\n\\t<button class=\\"dropdown-button\\" on:click={() => (isOpen = !isOpen)}>\\n\\t\\tTools <span class=\\"inline-block w-3\\">{isOpen ? '-' : '+'}</span>\\n\\t</button>\\n\\n\\t<div class=\\"dropdown-content absolute bottom-0 right-0 flex flex-col\\">\\n\\t\\t{#if referrer && referrerIsArchive}\\n\\t\\t\\t<button on:click={handleBack}>Back to WIP archive</button>\\n\\t\\t{:else if referrer && !referrerIsArchive}\\n\\t\\t\\t<a href={contextWipArchivePage === 1 ? '/wip' : \`/wip?page_num=\${contextWipArchivePage}\`}\\n\\t\\t\\t\\t>Back to WIP archive</a\\n\\t\\t\\t>\\n\\t\\t{:else}\\n\\t\\t\\t<a href={contextWipArchivePage === 1 ? '/wip' : \`/wip?page_num=\${contextWipArchivePage}\`}\\n\\t\\t\\t\\t>Back to WIP archive</a\\n\\t\\t\\t>\\n\\t\\t{/if}\\n\\n\\t\\t<button on:click={openSearch}>\\n\\t\\t\\t<span>Search</span>\\n\\t\\t\\t<span class=\\"search-button-shortcut\\">⌘K</span>\\n\\t\\t</button>\\n\\n\\t\\t<!-- <button>View references/research</button> -->\\n\\t</div>\\n</div>\\n\\n<style>\\n\\t.dropdown-content {\\n\\t\\topacity: 0;\\n\\t\\ttransform: translateY(calc(100% + 15px));\\n\\t\\tborder: 1px solid black;\\n\\t\\tpointer-events: none;\\n\\t\\tbackground-color: var(--white);\\n\\t\\ttransition:\\n\\t\\t\\topacity 0.2s,\\n\\t\\t\\ttransform 0.2s;\\n\\t}\\n\\n\\t.nav-options-dropdown.open .dropdown-content {\\n\\t\\topacity: 1;\\n\\t\\ttransform: translateY(calc(100% + 10px));\\n\\t\\tpointer-events: auto;\\n\\t}\\n\\n\\t.dropdown-content a,\\n\\t.dropdown-content button {\\n\\t\\tdisplay: flex;\\n\\t\\twidth: 100%;\\n\\t\\tpadding: 0.6rem 2.5rem;\\n\\t\\ttext-align: center;\\n\\t\\tjustify-content: center;\\n\\t\\ttransition: background-color 0.3s;\\n\\t\\twhite-space: nowrap;\\n\\n\\t\\t@media screen and (min-width: 1024px) {\\n\\t\\t\\tpadding: 1rem 3rem;\\n\\t\\t}\\n\\t}\\n\\n\\t.dropdown-content a:hover,\\n\\t.dropdown-content button:hover {\\n\\t\\tbackground-color: var(--grey-2);\\n\\t}\\n\\n\\t.dropdown-content button .search-button-shortcut {\\n\\t\\tcolor: var(--grey-3);\\n\\t}\\n\\n\\t.dropdown-content > *:not(:last-child) {\\n\\t\\tborder-bottom: 1px solid var(--grey-3);\\n\\t}\\n</style>\\n"],"names":[],"mappings":"AAoEC,6CAAkB,CACjB,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CACxC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,cAAc,CAAE,IAAI,CACpB,gBAAgB,CAAE,IAAI,OAAO,CAAC,CAC9B,UAAU,CACT,OAAO,CAAC,IAAI,CAAC;AAChB,GAAG,SAAS,CAAC,IACZ,CAEA,qBAAqB,mBAAK,CAAC,+BAAkB,CAC5C,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CACxC,cAAc,CAAE,IACjB,CAEA,+BAAiB,CAAC,eAAC,CACnB,+BAAiB,CAAC,oBAAO,CACxB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,MAAM,CAAC,MAAM,CACtB,UAAU,CAAE,MAAM,CAClB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,gBAAgB,CAAC,IAAI,CACjC,WAAW,CAAE,MAAM,CAEnB,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,MAAM,CAAC,CAAC;AACxC,GAAG,SAAS,IAAI,CAAC,IAAI;AACrB,GACC,CAEA,+BAAiB,CAAC,eAAC,MAAM,CACzB,+BAAiB,CAAC,oBAAM,MAAO,CAC9B,gBAAgB,CAAE,IAAI,QAAQ,CAC/B,CAEA,+BAAiB,CAAC,MAAM,CAAC,qCAAwB,CAChD,KAAK,CAAE,IAAI,QAAQ,CACpB,CAEA,+BAAiB,CAAG,cAAC,KAAK,WAAW,CAAE,CACtC,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,QAAQ,CACtC"}`
};
const NavOptionsDropdown = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let contextWipArchivePage;
  let $$unsubscribe_searchActive;
  let $defaultItemsPerPage, $$unsubscribe_defaultItemsPerPage;
  $$unsubscribe_searchActive = subscribe(searchActive, (value) => value);
  $$unsubscribe_defaultItemsPerPage = subscribe(defaultItemsPerPage, (value) => $defaultItemsPerPage = value);
  let { wipDetail } = $$props;
  if ($$props.wipDetail === void 0 && $$bindings.wipDetail && wipDetail !== void 0)
    $$bindings.wipDetail(wipDetail);
  $$result.css.add(css);
  contextWipArchivePage = wipDetail ? Math.floor(wipDetail.currentIndex / $defaultItemsPerPage) + 1 : 1;
  $$unsubscribe_searchActive();
  $$unsubscribe_defaultItemsPerPage();
  return `<div class="${escape(null_to_empty(`nav-options-dropdown enter-in-1 delay-100 col-span-6 lg:col-span-4 flex justify-end relative ${""}`), true) + " svelte-7z372w"}"><button class="dropdown-button svelte-7z372w">Tools <span class="inline-block w-3">${escape("+")}</span></button> <div class="dropdown-content absolute bottom-0 right-0 flex flex-col svelte-7z372w">${`${`<a${add_attribute(
    "href",
    contextWipArchivePage === 1 ? "/wip" : `/wip?page_num=${contextWipArchivePage}`,
    0
  )} class="svelte-7z372w">Back to WIP archive</a>`}`} <button class="svelte-7z372w" data-svelte-h="svelte-gjry6y"><span>Search</span> <span class="search-button-shortcut svelte-7z372w">⌘K</span></button> </div> </div>`;
});
export {
  NavOptionsDropdown as N
};
